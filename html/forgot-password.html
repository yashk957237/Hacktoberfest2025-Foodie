<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Foodie | Forgot Password</title>
  <meta name="description" content="Foodie - Reset your password to continue enjoying fast and delicious food delivery." />
  <meta name="keywords" content="Foodie, Forgot Password, Password Reset, Food Delivery" />
  <meta name="author" content="Foodie" />
  <meta property="og:title" content="Foodie | Forgot Password" />
  <meta property="og:description" content="Reset your password to continue enjoying fast and delicious food delivery." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="../imgs/og-image.png" />
  <link rel="icon" href="../imgs/favicon.png" type="image/png" />
  <link rel="stylesheet" href="../css/forgot-password.css" />
  <link rel="stylesheet" href="../css/cursor.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

  <!-- Back to Login -->
  <a href="login.html" class="back-home" aria-label="Back to Login">
    <span class="icon">‚Üê</span> Back to Login
  </a>

  <!-- Theme Toggle Button -->
  <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark/light mode" type="button">
    <i class="fa-solid fa-moon"></i>
  </button>

  <main class="container">

    <!-- Hero Section -->
    <section class="hero-section" aria-label="Foodie Hero Section">
      <div class="logo">Foodie.</div>
      <p class="hero-text">Don't worry! We'll help you reset your password</p>
      <div class="lock-icon" aria-hidden="true">üîê</div>
    </section>

    <!-- Forgot Password Form Section -->
    <section class="form-section" aria-label="Forgot Password Form">

      <!-- Email Request Form -->
      <article id="emailForm" class="auth-container active" aria-labelledby="emailTitle">
        <h2 id="emailTitle">Forgot Password?</h2>
        <p class="subtitle">Enter your email address and we'll send you a reset link</p>

        <form id="forgotForm" onsubmit="handleForgotPassword(event)" aria-label="Forgot Password Form">
          <div class="form-group">
            <label for="resetEmail">Email Address</label>
            <input type="email" id="resetEmail" name="email" placeholder="your@email.com" required />
          </div>

          <button type="submit" class="btn">Send Reset Link</button>
        </form>

        <p class="switch-form">Remember your password? <a href="login.html">Back to Login</a></p>
      </article>

      <!-- Success Message -->
      <article id="successMessage" class="auth-container" aria-labelledby="successTitle" style="display:none;">
        <div class="success-icon">‚úâÔ∏è</div>
        <h2 id="successTitle">Check Your Email</h2>
        <p class="subtitle">We've sent a password reset link to <strong id="sentEmail"></strong></p>
        <p class="info-text">Please check your inbox and click on the link to reset your password. The link will expire
          in 1 hour.</p>

        <div class="action-buttons">
          <button id="resendBtn" onclick="resendEmail()" class="btn-secondary" type="button">Resend Email</button>
          <a href="login.html" class="btn">Back to Login</a>
        </div>

        <p class="help-text">Didn't receive the email? Check your spam folder or 
          <a href="#" onclick="switchToEmailForm(); return false;">try another email address</a></p>
      </article>

    </section>
  </main>

  <!-- Inline JS (fixed version) -->
  <script>
    (function(){
      window.handleForgotPassword = function(event){
        event.preventDefault();
        var input = document.getElementById('resetEmail');
        if(!input) return;
        var email = input.value.trim();
        if(!email){
          alert('Please enter a valid email address.');
          input.focus();
          return;
        }
        var form = document.getElementById('forgotForm');
        var submitBtn = form ? form.querySelector('button[type="submit"]') : null;
        if(submitBtn) submitBtn.disabled = true;
        setTimeout(function(){
          if(submitBtn) submitBtn.disabled = false;
          var sent = document.getElementById('sentEmail');
          if(sent) sent.textContent = email;
          var emailForm = document.getElementById('emailForm');
          var success = document.getElementById('successMessage');
          if(emailForm) emailForm.style.display = 'none';
          if(success) success.style.display = 'block';
        },600);
      };

      window.resendEmail = function(){
        var input = document.getElementById('resetEmail');
        var sent = document.getElementById('sentEmail');
        var email = (input && input.value.trim()) || (sent && sent.textContent) || '';
        if(!email){ alert('Please provide an email address first.'); return; }
        alert('Resend requested for: ' + email);
      };

      window.switchToEmailForm = function(){
        var emailForm = document.getElementById('emailForm');
        var success = document.getElementById('successMessage');
        if(success) success.style.display = 'none';
        if(emailForm){
          emailForm.style.display = 'block';
          var input = document.getElementById('resetEmail');
          if(input) input.focus();
        }
      };

      var themeToggle = document.getElementById('themeToggle');
      if(themeToggle){
        themeToggle.addEventListener('click', function(){
          var isDark = document.documentElement.classList.toggle('dark');
          themeToggle.setAttribute('aria-pressed', String(isDark));
          themeToggle.innerHTML = isDark ? '<i class="fa-solid fa-sun"></i>' : '<i class="fa-solid fa-moon"></i>';
        });
      }
    })();
  </script>

  <script src="../js/cursor.js"></script>

</body>
</html>
